<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGENDAMENTO | V7 Est√©tica Automotiva</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="script.js"></script>
</head>
<body class="min-h-screen">
    <header class="bg-gray-900 shadow-lg sticky top-0 z-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="index.html" class="text-2xl font-bold text-white flex items-center">
                    <div class="logo">
                    <img src="imagens/logov72.png">
                    </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="index.html" class="bg-gray-900 text-white px-3 py-2 rounded-lg font-semibold hover:bg-yellow-500 transition duration-300">HOME</a>
                    <a href="servicos.html" class="bg-gray-900 text-white px-3 py-2 rounded-lg font-semibold hover:bg-yellow-500 transition duration-300">SERVI√áOS</a>
                    <a href="portfolio.html" class="bg-gray-900 text-white px-3 py-2 rounded-lg font-semibold hover:bg-yellow-500 transition duration-300">PORTF√ìLIO</a>
                    <a href="agendamento.html" class="bg-yellow-500 text-gray-900 px-3 py-2 rounded-lg font-semibold hover:bg-yellow-400 transition duration-300">AGENDAMENTO</a>
                    <a href="login.html" id="auth-link" class="bg-gray-900 text-white px-3 py-2 rounded-lg font-semibold hover:bg-yellow-500 transition duration-300">Login/Cadastro</a>
                </nav>
                <button id="menu-button" class="md:hidden text-gray-300 hover:text-yellow-500 focus:outline-none">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"/></svg>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden bg-gray-800">
            <nav class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="index.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-yellow-500">HOME</a>
                <a href="servicos.html" class="block px-3 py-2 rounded-md text-base font-medium text-yellow-500 hover:bg-gray-700">SERVI√áOS</a>
                <a href="portfolio.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-yellow-500">PORTF√ìLIO</a>
                <a href="agendamento.html" class="block px-3 py-2 rounded-md text-base font-medium bg-yellow-500 text-gray-900 hover:bg-yellow-400">AGENDAMENTO</a>
                <a href="login.html" id="mobile-auth-link" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-yellow-500">Login/Cadastro</a>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <h1 class="text-4xl font-extrabold text-center mb-12 text-white">Agende Seu Servi√ßo</h1>
        <div class="max-w-3xl mx-auto bg-gray-800 p-8 rounded-xl shadow-2xl">
            <p class="text-gray-400 mb-6">Preencha o formul√°rio simples e direto. Entraremos em contato via WhatsApp para confirmar a data e hora.</p>
            
            <div id="scheduling-restricted-message" class="text-center p-8 border border-red-500 rounded-lg bg-red-900/20 hidden">
                <i data-lucide="lock" class="w-12 h-12 text-yellow-500 mx-auto mb-4"></i>
                <h2 class="text-2xl font-bold text-white mb-3">Agendamento Exclusivo para Clientes</h2>
                <p class="text-gray-300 mb-6">Para agendar seu servi√ßo, por favor, fa√ßa <strong>login</strong> ou <strong>crie sua conta</strong> gratuitamente.</p>
                <div class="flex justify-center space-x-4">
                    <a href="login.html" class="bg-yellow-500 text-gray-900 font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition duration-300 shadow-xl">
                        Fazer Login
                    </a>
                    <a href="cadastro.html" class="border border-yellow-500 text-yellow-500 font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 hover:text-gray-900 transition duration-300 shadow-xl">
                        Criar Conta
                    </a>
                </div>
            </div>
            
            <form id="scheduling-form" class="hidden">
                <div class="space-y-6">
                    <div>
                        <label for="sched-name" class="block text-sm font-medium text-gray-300 mb-1">Nome Completo</label>
                        <input type="text" id="sched-name" required class="w-full bg-gray-900 border border-gray-700 text-white p-3 rounded-lg focus:ring-yellow-500 focus:border-yellow-500" disabled>
                        <p class="text-xs text-gray-500 mt-1">Preenchido automaticamente ap√≥s login.</p>
                    </div>
                    
                    <div>
                        <label for="sched-phone" class="block text-sm font-medium text-gray-300 mb-1">Telefone/WhatsApp</label>
                        <input type="tel" id="sched-phone" required placeholder="(99) 99999-9999" class="w-full bg-gray-900 border border-gray-700 text-white p-3 rounded-lg focus:ring-yellow-500 focus:border-yellow-500">
                    </div>

                    <div>
                        <label for="sched-service" class="block text-sm font-medium text-gray-300 mb-1">Servi√ßo Desejado</label>
                        <select id="sched-service" required class="w-full bg-gray-900 border border-gray-700 text-white p-3 rounded-lg focus:ring-yellow-500 focus:border-yellow-500">
                            <option value="" disabled selected>Selecione um Servi√ßo</option>
                            </select>
                    </div>

                    <div>
                        <label for="sched-car" class="block text-sm font-medium text-gray-300 mb-1">Marca/Modelo do Carro (Ex: VW Gol 2020)</label>
                        <input type="text" id="sched-car" required class="w-full bg-gray-900 border border-gray-700 text-white p-3 rounded-lg focus:ring-yellow-500 focus:border-yellow-500">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="sched-date" class="block text-sm font-medium text-gray-300 mb-1">Data Preferencial</label>
                            <input type="date" id="sched-date" required class="w-full bg-gray-900 border border-gray-700 text-white p-3 rounded-lg focus:ring-yellow-500 focus:border-yellow-500">
                        </div>
                        <div>
                            <label for="sched-time" class="block text-sm font-medium text-gray-300 mb-1">Hora Preferencial</label>
                            <input type="time" id="sched-time" required class="w-full bg-gray-900 border border-gray-700 text-white p-3 rounded-lg focus:ring-yellow-500 focus:border-yellow-500">
                        </div>
                    </div>
                    
                    <div class="pt-4">
                        <button type="submit" class="w-full bg-yellow-500 text-gray-900 font-bold py-3 px-4 rounded-lg text-lg hover:bg-yellow-400 transition duration-300 shadow-xl">
                            Enviar Solicita√ß√£o de Agendamento
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </main>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializa a lista de servi√ßos (Fun√ß√£o do script.js)
            const select = document.getElementById('sched-service');
            const urlParams = new URLSearchParams(window.location.search);
            const preselectedId = urlParams.get('serviceId');
            
            // Verifica se window.servicesData existe (do script.js)
            if (window.servicesData) {
                select.innerHTML = '<option value="" disabled selected>Selecione um Servi√ßo</option>' + 
                    window.servicesData.map(s => 
                        `<option value="${s.id}" ${s.id === preselectedId ? 'selected' : ''}>${s.name} (${s.category})</option>`
                    ).join('');
            }
            
            // L√≥gica de restri√ß√£o de acesso ao formul√°rio (Nova Fun√ß√£o do script.js)
            checkSchedulingAccess();
            
            // Tenta preencher o nome se o usu√°rio estiver logado
            const user = localStorage.getItem('v7_user');
            if (user) {
                const loggedInUser = JSON.parse(user);
                const nameInput = document.getElementById('sched-name');
                if (nameInput) nameInput.value = loggedInUser.name;
            }
        });
    </script>

    <footer class="bg-gray-900 text-gray-400 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold text-yellow-500 mb-4">V7 Est√©tica</h3>
                    <p>Cuidado e excel√™ncia em cada detalhe do seu ve√≠culo.</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-white mb-4">Contato</h3>
                    <ul>
                        <li><a href="tel:+551199999999" class="hover:text-yellow-500">üìû (11) 99999-9999</a></li>
                        <li><a href="mailto:contato@v7estetica.com" class="hover:text-yellow-500">üìß contato@v7estetica.com</a></li>
                        <li>Rua da Est√©tica, 123 - S√£o Paulo/SP</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-white mb-4">Redes Sociais</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="hover:text-yellow-500"><i data-lucide="instagram" class="w-6 h-6"></i></a>
                        <a href="#" class="hover:text-yellow-500"><i data-lucide="facebook" class="w-6 h-6"></i></a>
                        <a href="#" onclick="showMessageModal('WhatsApp', 'Iniciando conversa no WhatsApp...')" class="hover:text-yellow-500"><i data-lucide="whatsapp" class="w-6 h-6"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-8 pt-4 border-t border-gray-800 text-center">
                <p>&copy; 2025 V7 Est√©tica Automotiva. Projeto Acad√™mico.</p>
            </div>
        </div>
    </footer>
</body>
</html>